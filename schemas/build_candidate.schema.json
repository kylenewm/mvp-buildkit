{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Build Candidate",
    "description": "Phase -1 build candidate artifact - forces commitment to a single build",
    "type": "object",
    "required": [
      "schema_version",
      "build_id",
      "state_version",
      "title",
      "problem",
      "target_user",
      "wow_slice",
      "done_enough",
      "constraints",
      "non_goals",
      "risks",
      "open_questions",
      "size_caps"
    ],
    "properties": {
      "schema_version": { "type": "string", "pattern": "^[0-9]+\\.[0-9]+$" },
      "build_id": { "type": "string", "pattern": "^B[0-9]+$" },
      "state_version": { "type": "integer", "minimum": 1 },
  
      "title": { "type": "string", "minLength": 1, "maxLength": 120 },
      "problem": { "type": "string", "minLength": 1, "maxLength": 240 },
      "target_user": { "type": "string", "minLength": 1, "maxLength": 160 },
  
      "wow_slice": {
        "type": "string",
        "minLength": 1,
        "maxLength": 200,
        "description": "Must be achievable in <30s demo"
      },
  
      "done_enough": {
        "type": "array",
        "items": { "type": "string", "minLength": 1, "maxLength": 200 },
        "minItems": 1,
        "maxItems": 10
      },
  
      "constraints": {
        "type": "array",
        "items": { "type": "string", "minLength": 1, "maxLength": 200 },
        "maxItems": 20
      },
      "non_goals": {
        "type": "array",
        "items": { "type": "string", "minLength": 1, "maxLength": 200 },
        "maxItems": 20
      },
      "risks": {
        "type": "array",
        "items": { "type": "string", "minLength": 1, "maxLength": 200 },
        "maxItems": 20
      },
      "open_questions": {
        "type": "array",
        "items": { "type": "string", "minLength": 1, "maxLength": 200 },
        "maxItems": 20
      },
  
      "tags": {
        "type": "array",
        "description": "Optional: small tag set to help scope + later context injection",
        "maxItems": 10,
        "items": { "type": "string", "minLength": 2, "maxLength": 40 }
      },
  
      "size_caps": {
        "type": "object",
        "required": ["max_lines", "max_words"],
        "properties": {
          "max_lines": { "type": "integer", "minimum": 1 },
          "max_words": { "type": "integer", "minimum": 1 }
        },
        "additionalProperties": false
      }
    },
    "additionalProperties": false
  }
  